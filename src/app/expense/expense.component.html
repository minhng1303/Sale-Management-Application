<div class="container-fluid mx-0 px-0">
  <div class="d-flex align-items-start">
    <!-- -----------------------------------MAIN CONTENT---------------------------------------------- -->
    <div class="col-sm-2 h-auto pb-3 bg-light border border-rounded">
      <div
        class="mt-4 pl-1 d-flex flex-wrap align-items-center"
        style="border-bottom: 4px solid #17a2b8"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-list-ul"
          viewBox="0 0 16 16"
        >
          <path
            fill-rule="evenodd"
            d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"
          />
        </svg>
        <span class="ml-2">Lọc theo tên</span>
      </div>
      <input
        placeholder="Tên"
        class="form-control col-12 mt-2"
        name="search"
        [(ngModel)]="expenseName"
        (input)="searchByName()"
      />

      <div
        class="mt-4 pl-1 d-flex flex-wrap align-items-center"
        style="border-bottom: 4px solid #17a2b8"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-list-ul"
          viewBox="0 0 16 16"
        >
          <path
            fill-rule="evenodd"
            d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"
          />
        </svg>
        <span class="ml-2">Lọc theo nhóm</span>
      </div>
      <mat-form-field appearance="fill" #cat class="col-12 px-0 mt-3">
        <mat-label>Hạng mục</mat-label>
        <mat-select>
          <mat-option
            *ngFor="let cat of category"
            (click)="sort(cat)"
            [value]="cat"
          >
            {{ cat }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <!-- --------------------------------------------------- -->
      <div
        class="col-12 px-0 mb-2 mt-2"
        style="border-bottom: 4px solid #17a2b8"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-list-ul"
          viewBox="0 0 16 16"
        >
          <path
            fill-rule="evenodd"
            d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"
          />
        </svg>
        <span class="ml-2">Tìm kiếm theo ngày </span>
      </div>
      <div class="form-check" (click)="sortDay(all.textContent.trim())">
        <input class="form-check-input" name="date" type="radio" #input />
        <label class="form-check-label" for="flexRadioDefault1" #all>
          Tất cả
        </label>
      </div>
      <mat-form-field class="col-12 mt-2 px-0" appearance="fill">
        <mat-label>Choose a date</mat-label>
        <input
          #date
          (dateChange)="handleDateChange($event, input)"
          matInput
          [matDatepicker]="picker"
        />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker color="info" #picker></mat-datepicker>
      </mat-form-field>
    </div>

    <!-- ----------------------------CLIENT TABLE---------------------------------------------------- -->
    <div class="col-10 px-0 d-flex justify-content-start flex-wrap">
      <div
        class="
          col-12
          py-2
          px-3
          mb-1
          bg-light
          text-info
          d-flex
          align-items-center
        "
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="28"
          height="28"
          fill="currentColor"
          class="bi bi-people border border-info p-1"
          viewBox="0 0 16 16"
        >
          <path
            d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"
          />
        </svg>
        <span class="ml-2 font-weight-bold">Danh sách chi tiêu </span>
        <button class="btn btn-info ml-auto" (click)="onSubmit()">
          Thêm chi tiêu
        </button>
      </div>
      <table
        id="table"
        class="col-11 my-3 mx-auto table table-hover bg-light table-fixed"
      >
        <thead class="bg-info text-light" style="position: sticky">
          <tr class="d-flex header-row">
            <th class="col-2 border-right text-center">Thời gian</th>
            <th class="col-2 border-right text-center">Tên hàng hóa</th>
            <th class="col-2 border-right text-center">Danh mục</th>
            <th class="col-1 border-right text-center">Giá nhập</th>
            <th class="col-1 border-right text-center">Số lượng</th>
            <th class="col-2 border-right text-center">Thành tiền</th>
            <th class="col-1"></th>
            <th class="col-1"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of sortedExpense" class="d-flex">
            <td class="col-2 border-right border-bottom">
              {{ item.date.seconds * 1000 | date: "dd/MM/yyyy" }} <br />
              {{ item.date.seconds * 1000 | date: "hh:mm:ss" }}
            </td>
            <td class="col-2 border-right border-bottom">{{ item.name }}</td>
            <td class="col-2 border-right border-bottom">
              {{ item.category }}
            </td>
            <td class="col-1 border-right border-bottom px-0 text-center">
              {{ item.price | handlePrice }}
            </td>
            <td class="col-1 border-right border-bottom text-center">
              {{ item.quantity }}
            </td>
            <td class="col-2 border-right border-bottom text-center">
              {{ item.total | handlePrice }}
            </td>
            <td class="col-1 border-bottom">
              <button
                class="mx-1 col p-0"
                mat-raised-button
                color="warn"
                (click)="deleteExpense(item)"
              >
                Xóa
              </button>
            </td>
            <td style="width: 80px" class="px-0 col-1 border-bottom">
              <button
                class="ml-2 bg-success text-light"
                mat-raised-button
                (click)="editExpense(item)"
              >
                Sửa
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
